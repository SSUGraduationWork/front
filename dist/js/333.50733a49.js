"use strict";(self["webpackChunkco_work"]=self["webpackChunkco_work"]||[]).push([[333],{5333:function(t,e,s){s.r(e),s.d(e,{default:function(){return R}});var i=s(3396),n=s(7139),a=s(9242);const l=t=>((0,i.dD)("data-v-c1516cee"),t=t(),(0,i.Cn)(),t),o={key:0,class:"calendar"},c={class:"calendar_header"},d={class:"move"},r={class:"currentMonth"},h={class:"move"},u={key:0},p=["onClick"],m={key:0,class:"notCurrentDay"},g={key:1},y=["onClick"],M={key:2,class:"dot"},D=l((()=>(0,i._)("i",{class:"fi fi-ss-circle-small"},null,-1))),w=[D],k={id:"modal",class:"modal-overlay"},v={key:0,class:"modal_window"},_={class:"container1"},f={class:"targetDate"},x={class:"icons"},C={key:0,class:"trashBtn"},b={class:"title2"},S=["disabled"],I={class:"content2"},P=["disabled"],$={class:"delete-modal-window"},E=l((()=>(0,i._)("div",null,"title과 input 모두 입력하시오",-1))),F={class:"delete-footer"},j={class:"delete-modal-window"},B=l((()=>(0,i._)("div",null,"해당 회의록 삭제 후에는 다시 복구할 수 없습니다.",-1))),z={class:"delete-footer"},L={key:1,class:"modal_window"},q={class:"date1"},T={class:"title2"},N=["disabled"],Y={class:"content2"},H=["disabled"],U={class:"delete-modal-window"},V=l((()=>(0,i._)("div",null,"제목과 내용을 모두 입력해주세요.",-1))),W={class:"delete-footer"};function K(t,e,s,l,D,K){const O=(0,i.up)("container"),Q=(0,i.Q2)("click-outside");return(0,i.wg)(),(0,i.iD)(i.HY,null,[1==this.checkExist?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("i",{class:"fi fi-bs-angle-left",onClick:e[0]||(e[0]=t=>K.previousMonth())})]),(0,i._)("div",r,(0,n.zw)(D.currentMonth),1),(0,i._)("div",h,[(0,i._)("i",{class:"fi fi-bs-angle-right",onClick:e[1]||(e[1]=t=>K.nextMonth())})])]),(0,i._)("table",null,[(0,i._)("thead",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.days,(t=>((0,i.wg)(),(0,i.iD)("th",{key:t},(0,n.zw)(t),1)))),128))])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.calendar,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t,class:"tr"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,(t=>((0,i.wg)(),(0,i.iD)("td",{key:t,class:"td"},["notCurrentMonth"===t.classes||K.isToday(D.currentMonth,t.day)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("button",{onClick:e=>K.clickDate(D.currentMonth,t.day),class:"day"},(0,n.zw)(t.day),9,p)])),(0,i._)("div",null,["notCurrentMonth"==t.classes?((0,i.wg)(),(0,i.iD)("button",m,(0,n.zw)(t.day),1)):(0,i.kq)("",!0)]),K.isToday(D.currentMonth,t.day)?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("button",{class:"today",onClick:e=>K.clickDate(D.currentMonth,t.day)},(0,n.zw)(t.day),9,y)])):(0,i.kq)("",!0),"notCurrentMonth"!=t.classes&&K.checkDay(t.day)?((0,i.wg)(),(0,i.iD)("div",M,w)):(0,i.kq)("",!0)])))),128))])))),128))])])])):(0,i.kq)("",!0),(0,i._)("div",{class:"black-bg",style:(0,n.j5)({display:D.modalDisplay})},[(0,i._)("div",k,[null!=D.minutes?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",v,[(0,i.Wm)(O,{class:"date1"},{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i._)("div",f,(0,n.zw)(D.targetDate),1),(0,i._)("div",x,[(0,i._)("i",{class:"fi fi-rs-menu-dots-vertical",onClick:e[2]||(e[2]=t=>K.showButton())}),D.onButton?((0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("i",{class:"fi fi-rr-trash",onClick:e[3]||(e[3]=t=>K.deleteConfirm())})])):(0,i.kq)("",!0)])])])),_:1}),(0,i._)("div",b,[(0,i.wy)((0,i._)("textarea",{disabled:"professor"==D.role,type:"textarea",class:"inputTitle",onInput:e[4]||(e[4]=t=>(K.resize(t.target),K.changeInput())),placeholder:"제목을 입력해 주세요","onUpdate:modelValue":e[5]||(e[5]=t=>D.minutes.title=t),wrap:"soft",style:(0,n.j5)([{"min-height":"1.2em",width:"100%",height:"'auto'","line-height":"1"},{"background-color":"professor"==D.role?"white":"initial"}])},null,44,S),[[a.nr,D.minutes.title]])]),(0,i._)("div",I,[(0,i.wy)((0,i._)("textarea",{disabled:"professor"==D.role,onInput:e[6]||(e[6]=t=>(K.resize(t.target),K.changeInput())),style:(0,n.j5)([{"margin-top":"10px",width:"100%",height:"'auto'","min-height":"500px"},{"background-color":"professor"==D.role?"white":"initial"}]),type:"textarea",placeholder:"내용을 입력해 주세요.","onUpdate:modelValue":e[7]||(e[7]=t=>D.minutes.content=t),onChange:e[8]||(e[8]=t=>D.isModified=!0)},null,44,P),[[a.nr,D.minutes.content]])]),(0,i._)("div",{id:"modal",class:"deleteModal",style:(0,n.j5)({display:D.inputModalDisplay})},[(0,i._)("div",$,[E,(0,i._)("div",F,[(0,i._)("button",{class:"document",onClick:e[9]||(e[9]=t=>K.inputClose())},"확인")])])],4),(0,i._)("div",{id:"modal",class:"deleteModal",style:(0,n.j5)({display:D.deleteModalDisplay})},[(0,i._)("div",j,[B,(0,i._)("div",z,[(0,i._)("button",{class:"danger",onClick:e[10]||(e[10]=t=>K.deleteFunction())},"삭제"),(0,i._)("button",{class:"document",onClick:e[11]||(e[11]=t=>K.closeButton())},"취소")])])],4)])),[[Q,K.updateFunction]]):(0,i.kq)("",!0)])],4),null==D.minutes&&"flex"==D.modalDisplay?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",L,[(0,i._)("div",q,(0,n.zw)(D.targetDate),1),(0,i._)("div",T,[(0,i.wy)((0,i._)("textarea",{type:"textarea",disabled:"professor"==D.role,class:"inputTitle",onInput:e[12]||(e[12]=t=>K.resize(t.target)),placeholder:"제목을 입력해 주세요","onUpdate:modelValue":e[13]||(e[13]=t=>D.title=t),wrap:"soft",style:(0,n.j5)([{"min-height":"1.2em",width:"100%",height:"'auto'","line-height":"1"},{"background-color":"professor"==D.role?"white":"initial"}])},null,44,N),[[a.nr,D.title]])]),(0,i._)("div",Y,[(0,i.wy)((0,i._)("textarea",{disabled:"professor"==D.role,onInput:e[14]||(e[14]=t=>(K.resize(t.target),K.changeInput())),style:(0,n.j5)([{"margin-top":"10px",width:"100%",height:"'auto'"},{"background-color":"professor"==D.role?"white":"initial"}]),type:"textarea",placeholder:"내용을 입력해 주세요.","onUpdate:modelValue":e[15]||(e[15]=t=>D.content=t),onChange:e[16]||(e[16]=t=>D.isModified=!0)},null,44,H),[[a.nr,D.content]])]),(0,i._)("div",{id:"modal",class:"deleteModal",style:(0,n.j5)({display:D.inputModalDisplay})},[(0,i._)("div",U,[V,(0,i._)("div",W,[(0,i._)("button",{class:"document",onClick:e[17]||(e[17]=t=>K.inputClose())},"확인")])])],4)])),[[Q,K.postFunction]]):(0,i.kq)("",!0)],64)}s(7658);var O=s(6565),Q=s(3051),Z=s.n(Q);var A={directives:{clickOutside:Z().directive},data(){return{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],currentMonth:"",calendar:[],minutes:null,targetDate:null,title:null,content:null,userId:2,teamId:this.$route.params.teamId,update:!1,modalDisplay:"none",deleteModalDisplay:"none",check:"none",isModified:!1,inputModalDisplay:"none",onButton:!1,existMinutesList:null,checkCurrentMonth:null,once:!1,checkday:"",dayExist:!1,checkExist:!1,role:this.$store.state.userStore.role}},computed:{postSetParams(){const t={date:this.targetDate,title:this.title,content:this.content};return t},updateSetParams(){const t={date:this.targetDate,title:this.minutes.title,content:this.minutes.content};return t}},mounted(){this.initialFunction()},methods:{checkDay(t){return!!this.existMinutesList.includes(t)},changeInput(){this.isModified=!0},showButton(){console.log(this.onButton),0==this.onButton?this.onButton=!0:this.onButton=!1},closeButton(){this.onButton=!1,this.deleteClose()},async initialFunction(){this.checkExist=!1,await this.updateCalendar(),this.getExistMinuteList(this.teamId,this.currentMonth)},async secondFunction(t){this.checkExist=!1,await this.updateCalendarWithCustomMonth(t),this.getExistMinuteList(this.teamId,this.currentMonth)},async getExistMinuteList(t,e){O.be.get(`/calendar-service/calendars/getExistMinutes/${this.teamId}/${this.currentMonth}`).then((t=>{"Success"==t.data.message&&(this.checkCurrentMonth=this.currentMonth,this.existMinutesList=t.data.data,this.checkExist=!0,console.log("this.existMinutesList: ",this.existMinutesList))})).catch((t=>{console.log(t)}))},updateCalendar(){const t=new Date,e=t.getFullYear(),s=t.getMonth(),i=new Date(e,s+1,0).getDate();this.daysInMonth=i,this.currentMonth=s+1<10?`${e}-0${s+1}`:`${e}-${s+1}`,console.log("updateCurrentMOnth1: ",this.currentMonth);const n=new Date(e,s,1).getDay(),a=new Date(e,s,i).getDay(),l=n,o=6-a,c=new Date(e,s,1-l),d=new Date(e,s+1,o),r=[];let h=[];for(let u=c;u<=d;u.setDate(u.getDate()+1)){const t=u.getDate(),n=u<new Date(e,s,1),a=u>new Date(e,s,i),l=[];(n||a)&&l.push("notCurrentMonth"),h.push({day:t,classes:l.join(" ")}),7===h.length&&(r.push(h),h=[])}this.calendar=r},updateCalendarWithCustomMonth(t){const[e,s]=t.split("-").map(Number),i=new Date(e,s,0).getDate();this.daysInMonth=i;const n=new Date(e,s-1,1).getDay(),a=new Date(e,s-1,i).getDay(),l=n;this.prevMonthDays=l;const o=6-a,c=new Date(e,s-1,1-l),d=new Date(e,s,o),r=[];let h=[];for(let u=c;u<=d;u.setDate(u.getDate()+1)){const t=u.getDate(),n=u<new Date(e,s-1,1),a=u>new Date(e,s-1,i),l=[];(n||a)&&l.push("notCurrentMonth"),h.push({day:t,classes:l.join(" ")}),7===h.length&&(r.push(h),h=[])}console.log("updateCurrentMonth: ",this.currentMonth),this.calendar=r},previousMonth(){this.currentMonth=this.getPreviousMonth(this.currentMonth),this.secondFunction(this.currentMonth)},nextMonth(){this.currentMonth=this.getNextMonth(this.currentMonth),this.secondFunction(this.currentMonth)},getPreviousMonth(t){const[e,s]=t.split("-").map(Number);return 1===s?e-1+"-12":s-1<10?`${e}-0${s-1}`:`${e}-${s-1}`},getNextMonth(t){const[e,s]=t.split("-").map(Number);return 12===s?`${e+1}-01`:s+1<10?`${e}-0${s+1}`:`${e}-${s+1}`},isToday(t,e){const[s,i]=t.split("-").map(Number),n=new Date,a=n.getFullYear(),l=n.getMonth(),o=n.getDate();if(s==a&&i==l+1&&e==o)return!0},async postMinutes(){O.be.post(`/calendar-service/calendars/minutes/${this.teamId}`,this.postSetParams).then((t=>{this.checkExist=!1,"Success"==t.data.message&&(this.minutes=t.data.data,console.log("post success. minutes: ",this.minutes),this.getExistMinuteList(this.teamId,this.currentMonth),this.close())})).catch((t=>{console.log(t)}))},async postFunction(){console.log("postfunction"),"none"!=this.modalDisplay&&null!=this.postSetParams.title&&""!=this.postSetParams.title.trim()&&null!=this.postSetParams.content&&""!=this.postSetParams.content.trim()?await this.postMinutes():"none"==this.modalDisplay||null!=this.postSetParams.title&&""!=this.postSetParams.title.trim()||null!=this.postSetParams.content&&""!=this.postSetParams.content.trim()?this.inputModalDisplay="flex":this.close()},async getMinutes(){try{const t=await O.be.get(`/calendar-service/calendars/minutes/${this.teamId}/${this.targetDate}`);"Success"===t.data.message&&(this.minutes=t.data.data,console.log("getMinutes minutes: ",this.minutes))}catch(t){console.log(t)}},async clickDate(t,e){console.log("clickDate",e);const s=new Date(t);s.setDate(e);const i=s.toISOString().substring(0,10);this.targetDate=i,await this.getMinutes(),this.modalDisplay="flex"},close(){this.modalDisplay="none",this.minutes=null,this.targetDate=null,this.update=!1,this.deleteModalDisplay="none",this.title=null,this.content=null,this.onButton=!1},async updateMinutes(){O.be.patch(`/calendar-service/calendars/minutes/${this.teamId}`,this.updateSetParams).then((t=>{this.checkExist=!1,"Success"==t.data.message&&(this.minutes=t.data.data,console.log("update success. minutes:",this.minutes),this.close(),this.isModified=!1,this.getExistMinuteList(this.teamId,this.currentMonth))})).catch((t=>{console.log(t)}))},async updateFunction(){console.log("updateFunction"),"none"!=this.modalDisplay&&null!=this.updateSetParams.title&&""!=this.updateSetParams.title.trim()&&null!=this.updateSetParams.content&&""!=this.updateSetParams.content.trim()&&1==this.isModified?await this.updateMinutes():"none"!=this.modalDisplay&&null!=this.updateSetParams.title&&null!=this.updateSetParams.content&&0==this.isModified?this.close():"none"==this.modalDisplay||""!=this.updateSetParams.title.trim()&&null!=this.updateSetParams.title||""!=this.updateSetParams.content.trim()&&null!=this.updateSetParams.content?this.inputModalDisplay="flex":(await this.deleteMinutes(),this.getExistMinuteList(this.teamId,this.currentMonth))},async deleteFunction(){await this.deleteMinutes()},async deleteMinutes(){this.deleteModalDisplay="none",O.be.delete(`/calendar-service/calendars/minutes/${this.teamId}/${this.targetDate}`).then((t=>{this.checkExist=!1,"Success"==t.data.message&&(this.close(),this.getExistMinuteList(this.teamId,this.currentMonth),console.log("completely delete"))})).catch((t=>{console.log(t)}))},deleteClose(){this.deleteModalDisplay="none"},deleteProjects(){console.log("modalDisplay: ",this.modalDisplay),O.be.delete(`/calendar-service/dashboard/projects/${this.updateProjectId}`).then((t=>{"Success"==t.data.message&&(this.close(),console.log("Completely Delete")),this.$router.go(0)})).catch((t=>{console.log(t)}))},deleteConfirm(){this.deleteModalDisplay="flex"},resize(t){t.style.height="0.5px",t.style.height=t.scrollHeight+"px"},inputClose(){this.inputModalDisplay="none"}}},G=s(89);const J=(0,G.Z)(A,[["render",K],["__scopeId","data-v-c1516cee"]]);var R=J}}]);
//# sourceMappingURL=333.50733a49.js.map